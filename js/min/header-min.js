jQuery(document).ready(function($){function e(){this.terrain_geometry=new THREE.PlaneGeometry(2*a,2*n,128,128),this.terrain_material=new THREE.MeshLambertMaterial({color:r}),this.terrain_wire_material=new THREE.MeshLambertMaterial({color:0,wireframe:!0,transparent:!0}),this.terrain_wire=null,this.generate=function(){for(var e=0;e<this.terrain_geometry.vertices.length;e++)this.terrain_geometry.vertices[e].z=20*Math.random();return this.terrain=new THREE.Mesh(this.terrain_geometry,this.terrain_material),this.terrain_top=new THREE.Mesh(this.terrain_geometry.clone(),this.terrain_material),this.terrain_wire=new THREE.Mesh(this.terrain_geometry.clone(),this.terrain_wire_material),this.terrain.rotation.x=-Math.PI/2,this.terrain.position.y=-20,this.terrain_top.rotation.x=Math.PI/2,this.terrain_top.position.y=130,this.terrain_wire.rotation.x=-Math.PI/2,this.terrain_wire.position.y=-19.9,this.terrain.receiveShadow=!0,this.terrain.castShadow=!0,i.add(this.terrain,this.terrain_wire,this.terrain_top),this},this.generate()}function t(){i.rotation.y-=5e-4}var r=361671,n=window.innerHeight-window.innerHeight/4,a=window.innerWidth,i=new THREE.Scene;i.fog=new THREE.FogExp2(r,.0045);var o=new THREE.PerspectiveCamera(75,a/n,.1,1e3);o.lookAt(new THREE.Vector3(0,50,0)),o.position.set(0,50,200);var s=new THREE.WebGLRenderer({alpha:!0});s.setSize(a,n),s.shadowMapEnabled=!0,s.shadowMapType=THREE.PCFSoftShadowMap,s.setClearColor(r,1),s.domElement.className="header_canvas",$("header").append(s.domElement).addClass("loaded"),window.onresize=function(){n=window.innerHeight-window.innerHeight/4,a=window.innerWidth,o.aspect=a/n,o.updateProjectionMatrix(),s.setSize(a,n)},controls=new THREE.OrbitControls(o),controls.damping=.2,controls.maxPolarAngle=Math.PI/2,controls.minPolarAngle=1,controls.minDistance=100,controls.maxDistance=220,controls.enabled=!1,$("canvas").on("mouseenter",function(e){controls.enabled=!0}),$("canvas").on("mouseleave",function(e){controls.enabled=!1});var h=new THREE.SpotLight(16777215);h.position.set(0,100,100),h.intensity=1,h.castShadow=!0,i.add(h);for(var l=new THREE.Geometry,d=new THREE.PointCloudMaterial({color:16777215,size:1,transparent:!0,opacity:.25,map:THREE.ImageUtils.loadTexture("./js/gradient.png")}),c=0;1e4>c;c++){var w=400*(Math.random()-.5),E=400*(Math.random()-.5),m=400*(Math.random()-.5);l.vertices.push(new THREE.Vector3(w,E,m))}var p=new THREE.PointCloud(l,d);i.add(p);var H=e(),M=new THREE.JSONLoader,T={emissive:16777215,color:0,opacity:.5},v={wireframe:!0,wireframeLinewidth:2,color:16777215};M.load("js/hirsch.js",function(e,t){var r=new THREE.MeshLambertMaterial(T),n=new THREE.MeshBasicMaterial(v),a=new THREE.Mesh(e,r);a.scale.set(20,20,20),a.position.set(0,0,0);var o=new THREE.Mesh(e.clone(),n);o.scale.set(20.01,20.01,20.01),i.add(a,o)});var R=function(){requestAnimationFrame(R),t(),s.render(i,o)};R();var _=$(".overlay .rotate"),g=_.text();_.empty();var u=g.split("");u.forEach(function(e){_.append("<span>"+e+"</span>")})});