jQuery(document).ready(function($){function e(e,t){return e.stripes(t),this.terrain_geometry=new THREE.PlaneGeometry(100,1.5*책.data.length,63,책.data.length),this.terrain_material=new THREE.MeshBasicMaterial({color:10197915}),this.terrain_wire_material=new THREE.MeshBasicMaterial({color:15132390,wireframe:!0,transparent:!0}),this.total=0,this.stripe_count=t,this.color_count=0,this.set_vertices=!0,this.colors=[],this.terrain_wire=null,this.generate=function(){if(this.stripes=e.get_next_stripe(),!this.stripes)return console.log("generate : else"),this.terrain=new THREE.Mesh(this.terrain_geometry,this.terrain_material),this.terrain_wire=new THREE.Mesh(this.terrain_geometry.clone(),this.terrain_wire_material),this.terrain.rotation.x=-Math.PI/2,this.terrain_wire.rotation.x=-Math.PI/2,this.terrain_wire.position.y=.01,o.add(this.terrain,this.terrain_wire),this;console.log("generate : if");for(var t=0;t<this.stripes.length;t++){for(var r=32;r>0;r--)this.total++,this.terrain_geometry.vertices[this.total].z=.05*this.stripes[t][r];for(var i=0;32>i;i++)this.total++,this.terrain_geometry.vertices[this.total].z=.05*this.stripes[t][i]}this.generate()},this.update=function(){},this.generate(),this}function t(){o.rotation.y-=5e-4}var r={};$.ajax({dataType:"json",url:"audioData_4.json",success:function(e){userOpts.ready=!0,책.store_data(e),loading_stack(책)}});var i=40690,n=window.innerHeight-window.innerHeight/4,a=window.innerWidth,o=new THREE.Scene;o.fog=new THREE.FogExp2(i,.0045);var s=new THREE.PerspectiveCamera(75,a/n,.1,1e3);s.lookAt(new THREE.Vector3(0,50,0)),s.position.set(0,50,200);var h=new THREE.WebGLRenderer({alpha:!0});h.setSize(a,n),h.shadowMapEnabled=!0,h.shadowMapType=THREE.PCFSoftShadowMap,h.setClearColor(i,1),h.domElement.className="header_canvas",$("header").append(h.domElement),window.onresize=function(){n=window.innerHeight-window.innerHeight/4,a=window.innerWidth,s.aspect=a/n,s.updateProjectionMatrix(),h.setSize(a,n)},controls=new THREE.OrbitControls(s),controls.damping=.2,controls.maxPolarAngle=Math.PI/2,controls.minPolarAngle=1,controls.minDistance=100,controls.maxDistance=220,controls.enabled=!1,$("canvas").on("mouseenter",function(e){controls.enabled=!0}),$("canvas").on("mouseleave",function(e){controls.enabled=!1});var l=new THREE.SpotLight(16777215);l.position.set(0,100,100),l.intensity=1,l.castShadow=!0,o.add(l);var c=function(){requestAnimationFrame(c),t(),h.render(o,s)};c();var d=$(".overlay .rotate"),w=d.text();d.empty();var p=w.split("");p.forEach(function(e){d.append("<span>"+e+"</span>")})});